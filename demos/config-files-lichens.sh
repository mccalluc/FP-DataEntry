cat >$INPUT <<END_INPUT
id	dataset_id	institution_code	collection_code	catalog_number	basis_of_record	scientific_name	scientific_name_author	taxon_id	kingdom	phylum	class	order	family	genus	specific_epithet	kingdom_id	phylum_id	class_id	order_id	family_id	genus_id	species_id	country_code	host_country	latitude	longitude	year	month	event_date	elevation_in_meters	depth_in_meters	verbatim_scientific_name	taxon_rank	verbatim_kingdom	verbatim_phylum	verbatim_class	verbatim_order	verbatim_family	verbatim_genus	verbatim_specific_epithet	verbatim_infraspecific_epithet	verbatim_latitude	verbatim_longitude	coordinate_precision	maximum_elevation_in_meters	minimum_elevation_in_meters	elevation_precision	minimum_depth_in_meters	maximum_depth_in_meters	depth_precision	continent_ocean	state_province	county	country	recorded_by	locality	verbatim_year	verbatim_month	day	verbatim_basis_of_record	identified_by	date_identified	created	modified
2294758	fe35d6a0-0c6e-11dd-84d2-b8a03c50a862	S	Fungi	L31783	PRESERVED_SPECIMEN	Chaenotheca trichialis (Ach.) Th. Fr.	(Ach.) Th. Fr.	5261524	Fungi	Ascomycota	Lecanoromycetes		Coniocybaceae	Chaenotheca	Chaenotheca trichialis (Ach.) Th. Fr.	5	95	180		6243	2610335	5261524	SE	SE	56.51975	16.40167	1950	1	1950-01-07T00:00Z			Chaenotheca trichialis (Ach.) Th. Fr.		Fungi					Chaenotheca	trichialis		56.519750	16.401666								Europe	Kalmar län	Öland	Sweden	Sten Ahlner	Mörbylånga Öland: Mörbylånga sn, nära Mörbylångadalen hållplats, lövdunge	1950	1	7	S			2007-03-10T00:30Z	2010-09-28T00:38Z
2412383	fe35d6a0-0c6e-11dd-84d2-b8a03c50a862	S	Fungi	L32620	PRESERVED_SPECIMEN	Sclerophora nivea (Hoffm.) Tibell	Tibell	2610329	Fungi	Ascomycota	Lecanoromycetes		Coniocybaceae	Sclerophora	Sclerophora nivea (Hoffm.) Tibell	5	95	180		6243	2610321	2610329	SE	SE			1950	2	1950-02-12T00:00Z			Sclerophora nivea (Hoffm.) Tibell							Sclerophora	nivea											Europe	Uppland	Bondkyrka	Sweden	Sten Ahlner	Uppland: Bondkyrka sn, IV, Gottsunda, V om landsvÃ¤gen	1950-02-12			S			2007-03-10T00:53Z	2009-01-22T01:09Z
2402497	fe35d6a0-0c6e-11dd-84d2-b8a03c50a862	S	Fungi	L5670	PRESERVED_SPECIMEN	Ramalina baltica Lettau	Lettau	2608100	Fungi	Ascomycota	Lecanoromycetes	Lecanorales	Ramalinaceae	Ramalina	Ramalina baltica Lettau	5	95	180	1048	4812	2521975	2608100	SE	SE			1950	1	1950-01-03T00:00Z			Ramalina baltica Lettau							Ramalina	baltica											Europe	Ãland	MÃ¶rbylÃ¥nga	Sweden	S. Ahlner	Ãland: MÃ¶rbylÃ¥nga par., kyrkbyn.	1950-01-03			S			2007-03-10T00:51Z	2009-01-22T01:03Z
118560036	84c0e1a0-f762-11e1-a439-00145eb45e9a	ASU	ASULichens	547340	PRESERVED_SPECIMEN	Lecanora populicola (DC.) Duby	(DC.) Duby	2607107	Fungi	Ascomycota	Lecanoromycetes	Lecanorales	Lecanoraceae	Lecanora	Lecanora populicola (DC.) Duby	5	95	180	1048	4828	2569863	2607107	SE	US			1950	2	1950-02-27T00:00Z			Lecanora populicola		Fungi					Lecanora	populicola			0									Värmland		Sweden	S.W. Sundell	Sunnamo, Långtjärn	1950	2	27	Voucher			2007-10-02T11:43Z	2008-04-10T22:13Z
226055117	84c0e1a0-f762-11e1-a439-00145eb45e9a	ASU	Lichens	547340	PRESERVED_SPECIMEN	Lecanora populicola (DC.) Duby	(DC.) Duby	2607107	Fungi	Ascomycota	Lecanoromycetes	Lecanorales	Lecanoraceae	Lecanora	Lecanora populicola (DC.) Duby	5	95	180	1048	4828	2569863	2607107	SE	US			1950	2	1950-02-27T00:00Z			Lecanora populicola (DC.) Duby						Lecanoraceae	Lecanora	populicola														Sweden	S.W. Sundell	Sunnamo, Långtjärn	1950	2	27	PreservedSpecimen	H.T. Lumbsch		2009-10-14T15:58Z	2010-08-01T11:08Z
328211477	c1a13bf0-0c71-11dd-84d4-b8a03c50a862	UPS	BOT	L-180621	PRESERVED_SPECIMEN	Pertusaria albescens (Huds.) M. Choisy & Werner		6611099	Fungi	Ascomycota	Lecanoromycetes	Pertusariales	Pertusariaceae	Pertusaria	Pertusaria albescens	5	95	180	1051	4113	2599923	6611099	SE	SE			1950	2	1950-02-12T00:00Z			Pertusaria albescens						Lichenes													Europe	Uppland	Uppsala	Sweden	Ahlner, Sten	Bondkyrko IV, Gottsunda				preserved specimen			2011-02-04T01:57Z	2013-12-20T11:06Z
351914990	c1a13bf0-0c71-11dd-84d4-b8a03c50a862	UPS	BOT	L-180629	PRESERVED_SPECIMEN	Diplotomma alboatrum (Hoffm.) Flot.		5261470	Fungi	Ascomycota	Lecanoromycetes	Teloschistales	Physciaceae	Diplotomma	Diplotomma alboatrum	5	95	180	1050	8369	5261465	5261470	SE	SE			1950	1	1950-01-29T00:00Z			Diplotomma alboatrum						Lichenes													Europe	Uppland	Alsike	Sweden	Ahlner, Sten	Alsike I, Krusenberg, nära herrgården				preserved specimen			2011-04-29T02:12Z	2013-12-20T10:53Z
2316385	fe35d6a0-0c6e-11dd-84d2-b8a03c50a862	S	Fungi	L37605	PRESERVED_SPECIMEN	Evernia prunastri (L.) Ach.	(L.) Ach.	2605261	Fungi	Ascomycota	Lecanoromycetes	Lecanorales	Parmeliaceae	Evernia	Evernia prunastri (L.) Ach.	5	95	180	1048	8305	2605254	2605261	SE	SE	56.51975	16.40167	1950	1	1950-01-03T00:00Z			Evernia prunastri (L.) Ach.		Fungi					Evernia	prunastri		56.519750	16.401666								Europe	Kalmar län	Öland	Sweden	Sten Ahlner	Mörbylånga Öland: Mörbylånga sn, Kyrkbyn	1950	1	3	S			2007-03-10T00:34Z	2010-09-28T00:40Z
2403694	fe35d6a0-0c6e-11dd-84d2-b8a03c50a862	S	Fungi	L48180	PRESERVED_SPECIMEN	Ramalina fastigiata (Pers.) Ach.	Ach.	2608115	Fungi	Ascomycota	Lecanoromycetes	Lecanorales	Ramalinaceae	Ramalina	Ramalina fastigiata (Pers.) Ach.	5	95	180	1048	4812	2521975	2608115	SE	SE			1950	1	1950-01-03T00:00Z			Ramalina fastigiata (Pers.) Ach.							Ramalina	fastigiata											Europe	Ãland	MÃ¶rbylÃ¥nga	Sweden	Sten Ahlner	Ãland: MÃ¶rbylÃ¥nga sn, kyrkbyn	1950-01-03			S			2007-03-10T00:51Z	2009-01-22T01:04Z
2347514	fe35d6a0-0c6e-11dd-84d2-b8a03c50a862	S	Fungi	L13929	PRESERVED_SPECIMEN	Lobaria scrobiculata (Scop.) P. Gaertn.	(Scop.) DC.	5477662	Fungi	Ascomycota	Lecanoromycetes	Peltigerales	Lobariaceae	Lobaria	Lobaria scrobiculata (Scop.) P. Gaertn.	5	95	180	1055	8375	2600355	5477662	SE	SE	63.3939	12.93152	1950	2	1950-02-20T00:00Z			Lobaria scrobiculata (Scop.) DC.		Fungi					Lobaria	scrobiculata		63.393897	12.931516								Europe	Jämtlands län	Jämtland	Sweden	Magnus E. Fries	Åre Jämtland; Åre; c. 5 km S om Handöl;;	1950	2	20	S			2007-03-10T00:40Z	2010-09-28T00:42Z
2388143	fe35d6a0-0c6e-11dd-84d2-b8a03c50a862	S	Fungi	L47628	PRESERVED_SPECIMEN	Pleurosticta acetabulum (Neck.) Elix & Lumbsch	(Neck.) Elix & Lumbsch	2603769	Fungi	Ascomycota	Lecanoromycetes	Lecanorales	Parmeliaceae	Pleurosticta	Pleurosticta acetabulum (Neck.) Elix & Lumbsch	5	95	180	1048	8305	2603768	2603769	SE	SE	59.53797	17.9268	1950	1	1950-01-24T00:00Z			Pleurosticta acetabulum (Neck.) Elix & Lumbsch		Fungi					Pleurosticta	acetabulum		59.537969	17.926802								Europe	Stockholms län	Uppland	Sweden	Sten Ahlner	Hammarby Uppland: Hammarby sn, L. Väsby	1950	1	24	S			2007-03-10T00:49Z	2010-09-28T00:44Z
2295574	fe35d6a0-0c6e-11dd-84d2-b8a03c50a862	S	Fungi	L41730	PRESERVED_SPECIMEN	Chrysothrix candelaris (L.) J. R. Laundon	(L.) J.R. Laundon	5258337	Fungi	Ascomycota	Arthoniomycetes	Arthoniales	Chrysothricaceae	Chrysothrix	Chrysothrix candelaris (L.) J. R. Laundon	5	95	313	1273	8362	2592587	5258337	SE	SE	59.53797	17.9268	1950	1	1950-01-24T00:00Z			Chrysothrix candelaris (L.) J.R. Laundon		Fungi					Chrysothrix	candelaris		59.537969	17.926802								Europe	Stockholms län	Uppland	Sweden	Sten Ahlner	Hammarby Uppland: Hammarby sn, L. Väsby	1950	1	24	S			2007-03-10T00:30Z	2010-09-28T00:38Z
2412377	fe35d6a0-0c6e-11dd-84d2-b8a03c50a862	S	Fungi	L32614	PRESERVED_SPECIMEN	Sclerophora nivea (Hoffm.) Tibell	Tibell	2610329	Fungi	Ascomycota	Lecanoromycetes		Coniocybaceae	Sclerophora	Sclerophora nivea (Hoffm.) Tibell	5	95	180		6243	2610321	2610329	SE	SE			1950	2	1950-02-05T00:00Z			Sclerophora nivea (Hoffm.) Tibell							Sclerophora	nivea											Europe	Uppland	Vaksala	Sweden	Sten Ahlner	Uppland: Vaksala sn, III, Vittulsberg, allÃ©n	1950-02-05			S			2007-03-10T00:53Z	2009-01-22T01:09Z
208335970	fe35d6a0-0c6e-11dd-84d2-b8a03c50a862	S	Fungi	F80793	PRESERVED_SPECIMEN	Candelariella xanthostigma (Ach.) Lettau	(Ach.) Lettau	2599888	Fungi	Ascomycota	Lecanoromycetes	Candelariales	Candelariaceae	Candelariella	Candelariella xanthostigma (Ach.) Lettau	5	95	180	1269	8343	2599884	2599888	SE	SE	59.53797	17.9268	1950	1	1950-01-24T00:00Z			Candelariella xanthostigma (Ach.) Lettau		Fungi					Candelariella	xanthostigma		59.537969	17.926802								Europe	Stockholms län	Uppland	Sweden	Sten Ahlner	Hammarby Uppland: Hammarby sn, L. Väsby, lind i allén.	1950	1	24	S			2009-04-30T18:32Z	2010-09-28T00:37Z
990314	aab0cf80-0c64-11dd-84d1-b8a03c50a862	LD	General	1051985	PRESERVED_SPECIMEN	Ramalina fraxinea (L.) Ach.		2608090	Fungi	Ascomycota	Lecanoromycetes	Lecanorales	Ramalinaceae	Ramalina	Ramalina fraxinea	5	95	180	1048	4812	2521975	2608090	SE	SE	56.74281	12.96243	1950	2	1950-02-19T00:00Z			Ramalina fraxinea						Ramalinaceae	Ramalina	fraxinea		56.74280660	12.96243190								Europe		Halland	Sweden		No locality information available	1950	02	19	PreservedSpecimen			2007-03-09T19:57Z	2013-12-23T17:06Z
845332	aab0cf80-0c64-11dd-84d1-b8a03c50a862	LD	General	1131054	PRESERVED_SPECIMEN	Lecanora circumborealis Brodo & Vitik.		2607009	Fungi	Ascomycota	Lecanoromycetes	Lecanorales	Lecanoraceae	Lecanora	Lecanora circumborealis	5	95	180	1048	4828	2569863	2607009	SE	SE	59.82164	13.4788	1950	2	1950-02-01T00:00Z			Lecanora circumborealis						Lecanoraceae	Lecanora	circumborealis		59.82164000	13.47880000								Europe		Värmland	Sweden		Unknown	1950	02	01	PreservedSpecimen			2007-03-09T19:29Z	2013-12-23T17:08Z
802679	aab0cf80-0c64-11dd-84d1-b8a03c50a862	LD	General	1155642	PRESERVED_SPECIMEN	Haematomma ochroleucum (Neck.) J. R. Laundon		2607754	Fungi	Ascomycota	Lecanoromycetes	Lecanorales	Haematommataceae	Haematomma	Haematomma ochroleucum	5	95	180	1048	8325	2607742	2607754	SE	SE	56.51959	16.39855	1950	1	1950-01-07T00:00Z			Haematomma ochroleucum						Haematommataceae	Haematomma	ochroleucum		56.51958970	16.39855220								Europe		Öland	Sweden		No locality information available	1950	01	07	PreservedSpecimen			2007-03-09T19:21Z	2013-12-23T17:09Z
788745815	aab0cf80-0c64-11dd-84d1-b8a03c50a862	LD	General	1511315	PRESERVED_SPECIMEN	Pertusaria lactea (L.) Arnold		7250804	Fungi	Ascomycota	Lecanoromycetes	Pertusariales	Pertusariaceae	Pertusaria	Pertusaria lactea	5	95	180	1051	4113	2599923	7250804	SE	SE	56.51959	16.39855	1950	1	1950-01-07T00:00Z			Pertusaria lactea						Pertusariaceae	Pertusaria	lactea		56.51958970	16.39855220								Europe		Öland	Sweden		No locality information available	1950	01	07	PreservedSpecimen			2013-05-27T12:19Z	2013-12-23T17:18Z
788768145	aab0cf80-0c64-11dd-84d1-b8a03c50a862	LD	General	1534144	PRESERVED_SPECIMEN	Lecanora populicola (DC.) Duby		2607107	Fungi	Ascomycota	Lecanoromycetes	Lecanorales	Lecanoraceae	Lecanora	Lecanora populicola	5	95	180	1048	4828	2569863	2607107	SE	SE	59.88515	13.72021	1950	2	1950-02-27T00:00Z			Lecanora populicola						Lecanoraceae	Lecanora	populicola		59.88514730	13.72020530								Europe		Värmland	Sweden		No locality information available	1950	02	27	PreservedSpecimen			2013-05-27T12:21Z	2013-12-23T17:19Z
END_INPUT

cat >$CONFIG <<END_CONFIG
<configuration>
	
	<!-- The <*-configuration> groupings are purely cosmetic: Only the tags that directly contain data matter. -->

	<solr-configuration>
		<solr-directory>$SOLR_DIR</solr-directory>
		<solr-files>
			<item key="schema.xml">
				<!-- For more information, see http://wiki.apache.org/solr/SchemaXml -->
				<schema name="example" version="1.5">
					<fields>
						<field name="_fp_internal_id" type="fpID" indexed="true" stored="false" required="true" multiValued="false"/>
						<field name="recordedBy" type="fpCollectorName" indexed="true" stored="true" required="false" multiValued="false"/>
						<field name="geography_index" type="fpGeography" indexed="true" stored="false" required="false" multiValued="true"/>
						<field name="country" type="string" indexed="false" stored="true" required="false" multiValued="false"/>
						<field name="stateCounty" type="string" indexed="false" stored="true" required="false" multiValued="false"/>
						<field name="verbatimLocality" type="string" indexed="false" stored="true" required="false" multiValued="false"/> 
						<field name="latitudeLongitude" type="string" indexed="false" stored="true" required="false" multiValued="true"/>
						<field name="eventDate" type="fpDate" indexed="true" stored="true" required="false" multiValued="false"/>
						<field name="taxon_index" type="fpTaxon" indexed="true" stored="false" required="false" multiValued="true"/> 
						<field name="kingdom" type="string" indexed="false" stored="true" required="false" multiValued="true"/>
						<field name="phylum" type="string" indexed="false" stored="true" required="false" multiValued="true"/>
						<field name="class" type="string" indexed="false" stored="true" required="false" multiValued="true"/>
						<field name="order" type="string" indexed="false" stored="true" required="false" multiValued="true"/>
						<field name="family" type="string" indexed="false" stored="true" required="false" multiValued="true"/>
						<field name="scientificName" type="string" indexed="false" stored="true" required="false" multiValued="true"/>
					</fields>
					<uniqueKey>_fp_internal_id</uniqueKey>
					<copyField source="kingdom" dest="taxon_index"/>
					<copyField source="phylum" dest="taxon_index"/>
					<copyField source="class" dest="taxon_index"/>
					<copyField source="order" dest="taxon_index"/>
					<copyField source="family" dest="taxon_index"/>
					<copyField source="scientificName" dest="taxon_index"/>
					<copyField source="country" dest="geography_index"/>
					<copyField source="stateCounty" dest="geography_index"/>
					<copyField source="verbatimLocality" dest="geography_index"/>
					<types>
						<!-- Remember that everything is wrapped in a JSON list, so some kind of tokenization is essential, even for simple fields.
						<fieldType name="fpMinimallySearchable" class="solr.TextField" sortMissingLast="true" omitNorms="true">
							<analyzer>
								<tokenizer class="solr.StandardTokenizerFactory"/>
							</analyzer>
						</fieldType>
						-->
						<fieldType name="fpCollectorName" class="solr.TextField" sortMissingLast="true" omitNorms="true">
							<analyzer>
								<charFilter class="solr.PatternReplaceCharFilterFactory" replacement="" pattern="^(?i)col[^:]*:"/>
								<charFilter class="solr.PatternReplaceCharFilterFactory" replacement="" pattern="(?i)\b(du|de|dr|van|den)\b"/>
								<tokenizer class="solr.KeywordTokenizerFactory"/>
								<filter class="solr.ASCIIFoldingFilterFactory"/>
								<filter class="solr.LowerCaseFilterFactory"/> <!-- Capture just the first two sequences of two or more letters. -->
								<filter class="solr.PatternCaptureGroupFilterFactory" preserve_original="false"
									pattern="^\W*(?:\w\W+)*(\p{L}{2,})(?:[^,&amp;/\p{L}]+(?:\p{L}[^,&amp;/\p{L}]+)*(\p{L}{2,}))?"/>
								<!-- 
								             Skip while no more than one letter in a row
								                           2-or-more letters in a row
								                                      Optionally, skip more isolated letters
								                                         and give up if we see separating punctuation
								                                                                          And get the second 2-or-more letters.
								             ^\W*(?:\w\W+)*
								                           (\p{L}{2,})
								                                      (?:[^,&amp;/\p{L}]+(?:\p{L}[^,&amp;/\p{L}]+)*           )?
								                                                                                   (\p{L}{2,})
								-->
							</analyzer>
						</fieldType>
						<fieldType name="fpTaxon" class="solr.TextField" sortMissingLast="true" omitNorms="true">
							<analyzer>
								<tokenizer class="solr.LowerCaseTokenizerFactory"/> <!-- Names should be plain ascii already. -->
							</analyzer>
						</fieldType>
						<fieldType name="fpGeography" class="solr.TextField" sortMissingLast="true" omitNorms="true">
							<analyzer>
								<tokenizer class="solr.StandardTokenizerFactory"/>
								<filter class="solr.LengthFilterFactory" min="2" max="1023"/><!-- Max is arbitrary, but required. -->
								<filter class="solr.ASCIIFoldingFilterFactory"/>
								<filter class="solr.LowerCaseFilterFactory"/>
							</analyzer>
						</fieldType>
						<fieldType name="fpDate" class="solr.TextField" sortMissingLast="true" omitNorms="true"> 
							<!-- Given YYYY-MM-DD, generate these tokens for indexing: YYYY YYYY-MM YYYY-MM-DD 
							... but DO NOT tokenize queries: YYYY-MM should match YYYY-MM and YYYY-MM-DD but not plain YYYY -->
							<analyzer type="index"> 
								<!-- The input is actually wrapped in a JSON list, so we need to strip the extraneous characters. -->
								<charFilter class="solr.PatternReplaceCharFilterFactory" pattern="[^0-9-]" replacement=""/>
								<tokenizer class="solr.PathHierarchyTokenizerFactory" delimiter="-"/>
							</analyzer>
							<analyzer type="query">
								<tokenizer class="solr.KeywordTokenizerFactory"/>
							</analyzer>
						</fieldType>
						<fieldType name="string" class="solr.StrField" sortMissingLast="true"/>
						<fieldType name="fpID" class="solr.StrField" sortMissingLast="true"/>
					</types>
				</schema>
			</item>
			<item key="solrconfig.xml">
				<!-- For more information, see http://wiki.apache.org/solr/SolrConfigXml. -->
				<config>
					<luceneMatchVersion>4.5</luceneMatchVersion>
					<requestHandler name="/select" class="solr.SearchHandler">
						<lst name="defaults">
							<int name="rows">10</int>
							<str name="df">text</str>
						</lst>
					</requestHandler>
					<requestHandler name="/update" class="solr.UpdateRequestHandler"/>
				</config> 
			</item>
		</solr-files>
	</solr-configuration>

	<server-configuration>
		<port>$PORT</port><!-- Only used by Jetty; Ignored by Tomcat. -->
	</server-configuration>

	<term-tuple-configuration>
		<!--
			This controls the ordering and grouping of fields in your suggested matches.
			The outer items ("tuples") must correspond to fields in your solr index.
			The inner items ("terms") must correspond to fields in your data entry application.
		-->
		<tuples-map>
			<item key="recordedBy">
				<item>recordedBy</item>
			</item>
		
		 	<!-- Clumping of geography is kind of arbitrary... -->
			<item key="country">
				<item>countryCode</item>
				<item>country</item>
			</item>
			<item key="stateCounty">
				<item>stateProvince</item>
				<item>county</item>
			</item>
			<item key="verbatimLocality">
				<item>verbatimLocality</item>
			</item>
			<item key="latitudeLongitude">
				<item>decimalLatitude</item>
				<item>decimalLongitude</item>
			</item>

			<item key="eventDate">
				<item>eventDate</item>
			</item>

			<item key="kingdom">
				<item>kingdom</item>
			</item>
			<item key="phylum">
				<item>phylum</item>
			</item>
			<item key="class">
				<item>class</item>
			</item>
			<item key="order">
				<item>order</item>
			</item>
			<item key="family">
				<item>family</item>
			</item>
			<item key="scientificName">
				<item>scientificName</item>
			</item>
			
		</tuples-map>
	</term-tuple-configuration>

	<ingester-configuration>
		<!-- Replace this with the full path of the file you want to read. -->
		<ingest-file>$INPUT</ingest-file>
		
		<!-- Optional. Either 'FILE' or 'GBIF'. Default is 'FILE'. -->
		<!-- <ingest-type></ingest-type> -->
		
		<!-- Optional. Default is 'UTF-8'. -->
		<!-- <encoding></encoding> -->
		
		<!-- Optional. Whether to try to correct bad character encodings. Default is 'NONE'. -->
		<encoding-correction>FIX_A_TILDE</encoding-correction>
		
		<!-- Optional. Default is the tab character. -->
		<!-- <delimiter></delimiter> -->
		
		<!-- Optional. Character which quotes strings containing the delimiter. -->
		<!-- <quote-character></quote-character> -->
		
		<!-- Optional. How a database null is represented in export. Usually 'NULL' or '\N'. -->
		<!-- <null-marker></null-marker> -->
		
		<!-- Optional. If some column title does not match exactly match the Term, a mapping can be given here. -->
		<column-map>
			<item key="latitude">decimalLatitude</item>
			<item key="longitude">decimalLongitude</item>
			<item key="locality">verbatimLocality</item>
			<item key="state_province">stateProvince</item>
			<item key="recorded_by">recordedBy</item>
			<item key="specific_epithet">scientificName</item>
			<item key="country_code">country</item>
			<item key="event_date">eventDate</item>
		</column-map>
	</ingester-configuration>

	<front-end-configuration>
	
		<title-html>DEMO: Lichens</title-html>
		<blurb-html>
			<p>
				Two features of note are encoding correction and local controlled vocabulary integration:
			</p>
			<p>
				<b>Encoding correction</b>: It is always best just to get character encodings right in the first place,
				but sometimes it can be outside your control, and the source upstream mingles records which are correct
				with others which are corrupt. If you are seeing A-tilde all over the place, this setting can help:
				<code>&lt;encoding-correction&gt;FIX_A_TILDE&lt;/encoding-correction&gt;</code>. About half the records 
				behind this demo had that problem. 
				(If you're seeing black diamonds, empty boxes, or just lots of question marks, data has already been lost, 
				and the encoding can not be corrected. Sorry.)
			</p>
			<p>
				<b>Local controlled vocabulary</b>: Often, data entry applications want names and places to be pulled
				from a local controlled vocabulary. The data that the application actually submits is not a string,
				but an internal ID. This will require some programming on your part, but FP-DataEntry at least gives you
				a start: The <code>&lt;controlled-vocabularies&gt;</code> tag in <a href="config.xml" target="_blank">config.xml</a>
				lets you specify a mock ajax response, and the comments in <a href="js/demo-extra.js" target="_blank">js/demo-extra.js</a>
				suggest how to get started with a local integration.
			</p>
			<p>
				Click "Find!" to see both of these features in action.
			</p>
		</blurb-html>
		
		<!--
			Mapping from query parameters to solr fields.
			Over time, either the solr index or the client application could change:
			this allows them to be decoupled.
			TODO: It feels like, either this is gratuitous, or there should be something similar for a-name. Not sure which.
		-->
		<q-solr>
			<item key="collector">recordedBy</item>
			<item key="taxon">taxon_index</item>
			<item key="geography">geography_index</item>
			<item key="date">eventDate</item>
		</q-solr>
	
		<!--
			This defines the fields available in the front end demo.
			The "key" will used as the HTML "name" attribute on the inputs.
			"label" will be the human readable label beside it.
			"q-name" is the mapping of demo inputs to query terms. (You might want more than one field mapped to a single q-name.)
			"a-name" is the mapping of the query response from solr to input fields.
		-->
		<input-fields>
			<item key="my_collector"	label="collector name"		q-name="collector"	a-name="recordedBy"/>
			<item key="my_collector_id"	label="collector ID"							a-name="recordedBy_id"/>
			<item key="my_country"		label="country"				q-name="geography"	a-name="country"	default="Sweden" />
			<item key="my_province"		label="province"			q-name="geography"	a-name="stateProvince"/>
			<item key="my_county"		label="county"				q-name="geography"	a-name="county"/>
			<item key="my_locality"		label="locality"			q-name="geography"	a-name="verbatimLocality"/>
			<item key="my_date"			label="collection date"		q-name="date"		a-name="eventDate"/>
			<item key="my_name"			label="scientific name"		q-name="taxon"		a-name="scientificName"/>
		</input-fields>

		<!--
			This lists the terms where the UI should offer choices from a controlled vocabulary.
			The sub-elements, if present, support a mock-up of the AJAX interface which you
			would need to implement on your collection management application.
		-->
		<controlled-vocabularies>
			<item key="recordedBy">
				<item key="Ahlner, Sten">1</item>
				<item key="Magnus E. Fries">2</item>
				<item key="S. Ahlner">1</item>
				<item key="Sten Ahlner">1</item>
				<item key="S.W. Sundell">3</item>
				<item key="Allen, A.">4</item>
				<item key="Brown, B.">5</item>
				<item key="Clark, C.">6</item>
				<item key="Davis, D.">7</item>
				<item key="Evans, E.">8</item>
				<item key="Flores, F.">9</item>
				<item key="Garcia, G.">10</item>
				<item key="Hernandez, H.">11</item>
				<item key="Ingram, I.">12</item>
				<item key="Johnson, J.">13</item>
				<item key="King, K.">14</item>
				<item key="Lopez, L.">15</item>
				<item key="Miller, M.">16</item>
				<item key="Nelson, N.">17</item>
				<item key="Ortiz, O.">18</item>
				<item key="Perez, P.">19</item>
				<item key="Quinn, Q.">20</item>
				<item key="Rodriguez, R.">21</item>
				<item key="Smith, S.">22</item>
				<item key="Taylor, T.">23</item>
				<item key="Underwood, U.">24</item>
				<item key="Vasquez, V.">25</item>
				<item key="Williams, W.">26</item>
				<item key="Young, Y.">27</item>
				<item key="Zimmerman, Z.">28</item>
			</item>
		</controlled-vocabularies>

	</front-end-configuration>

</configuration>
END_CONFIG